<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="/static/styles/addtocart.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://kit.fontawesome.com/92d70a2fd8.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
        <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
        <link rel="icon" type="image/x-icon" href="/static/assets/favicon.ico">
        <title>Your Cart</title>
        <script async src="https://www.googletagmanager.com/gtag/js?id=AW-11548243331"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'AW-11548243331'); </script>
    </head>
    <body>
        <div class="header">
            <div class="logo">
                <img src="/static/assets/website_icon1.webp" alt="">
            </div>
            <div class="header1">
                <h1 class="head-txt">Yoga Packages</h1>
            </div>
            <div class="cart">
                <i class="fa-solid fa-cart-shopping"></i>
                <p id="count">0</p>
            </div>
        </div>
        
        <div class="toggle-container">
            <!-- Toggle Switch for Online/Offline -->
            <label class="switch">
                <input type="checkbox" id="mode-toggle">
                <span class="slider round"></span>
            </label>
            <span id="mode-status">Offline</span>
        
            <!-- Payment Manner Dropdown -->
            <div class="select-wrapper">
                <label for="payment-manner">Payment Manner:</label>
                <select id="payment-manner" onchange="updateClassFrequencyOptions()">
                    <option value="" disabled selected>Select Payment Manner</option>
                    <option value="monthly">Monthly</option>
                    <option value="quarterly">Quarterly</option>
                    <option value="half-yearly">Half Yearly</option>
                    <option value="yearly">Yearly</option>
                </select>
            </div>
        
            <!-- Class Frequency Dropdown -->
            <div class="select-wrapper">
                <label for="class-frequency">Class Frequency:</label>
                <select id="class-frequency" disabled>
                    <option value="" disabled selected>Select Class Frequency</option>
                    <option value="regular">Regular</option>
                    <option value="monthly">Monthly</option>
                </select>
            </div>
        
            <!-- Month Frequency Dropdown -->
            <div class="select-wrapper">
                <label for="month-frequency">Month Frequency:</label>
                <select id="month-frequency" disabled>
                    <option value="" disabled selected>Select Month Frequency</option>
                    <option value="4-sessions">4-sessions</option>
                    <option value="8-sessions">8-sessions</option>
                    <option value="12-sessions">12-sessions</option>
                </select>
            </div>
        </div>
        
        <div class="container">
            <div id="root"></div>
            <div class="sidebar">
                <div class="head"><p>My Cart</p></div>
                <div id="cartItem">Your cart is empty</div>
                <div class="foot">
                    <h3>Total</h3>
                    <h2 id="total">Rs 0.00</h2>
                    <button id="pay-button" onclick="submitPayment()">Submit</button>
                </div>
            </div>
        </div>
        <script src="/static/scripts/addtocart.js"></script>
    </body>
</html>

<!-- 

<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/static/styles/addtocart.css">
        <script src="https://kit.fontawesome.com/92d70a2fd8.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
        <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
        <link rel="icon" type="image/x-icon" href="/static/assets/favicon.ico">
        <title>Your Cart</title>
        <script async src="https://www.googletagmanager.com/gtag/js?id=AW-11548243331"></script> 
        <script> 
            window.dataLayer = window.dataLayer || []; 
            function gtag(){dataLayer.push(arguments);} 
            gtag('js', new Date()); 
            gtag('config', 'AW-11548243331'); 
        </script>
    </head>
    <body>
        <div class="header">
            <div class="logo">
                <img src="/static/assets/website_icon1.webp" alt="">
            </div>
            <div class="header1">
                <h1 class="head-txt">Yoga Packages</h1>
            </div>
            <div class="cart">
                <i class="fa-solid fa-cart-shopping"></i>
                <p id="count">0</p>
            </div>
        </div>
        
        <div class="toggle-container">
            <label class="switch">
                <input type="checkbox" id="mode-toggle">
                <span class="slider round"></span>
            </label>
            <span id="mode-status">Offline</span>

            <label for="payment-manner">Payment Manner:</label>
            <select id="payment-manner" onchange="updatePrices()">
                <option value="" disabled selected>Select Payment Manner</option>
                <option value="monthly">Monthly</option>
                <option value="quarterly">Quarterly</option>
                <option value="half-yearly">Half Yearly</option>
                <option value="yearly">Yearly</option>
            </select>

            <label for="class-frequency" style="margin-left: 15px;">Class Frequency:</label>
            <select id="class-frequency" onchange="updatePrices()">
                <option value="" disabled selected>Select Class Frequency</option>
                <option value="regular">Regular</option>
                <option value="alternate">Alternate</option>
            </select>
        </div>
        
        <div class="container">
            <div id="root"></div>

            <div class="sidebar">
                <div class="head"><p>My Cart</p></div>
                <div id="cartItem">Your cart is empty</div>
                <div class="foot">
                    <h3>Total</h3>
                    <h2 id="total">Rs 0.00</h2>
                    <button id="pay-button" onclick="submitPayment()">Submit</button>
                </div>
            </div>
        </div>

        <script>
            const product = [
                {
                    id: 0,
                    image: "/static/assets/meditation.webp",
                    title: 'General Yoga',
                    onlinePrice: 120,
                    offlinePrice: 100,
                    dataType: 'general-yoga',
                    description: "1. Minor muscle exercise<br>2. Major muscle exercise<br>3. Sun/Moon Salutations<br>4. General Asanas<br>5. Pranayama<br>6. Bandha<br>7. Mudras<br>8. Shanti Path"
                },
                {
                    id: 1,
                    image: '/static/assets/advancedyoga.webp',
                    title: 'Advanced Yoga',
                    onlinePrice: 60,
                    offlinePrice: 50,
                    dataType: 'advanced-yoga',
                    description: '1. Minor muscle exercise<br>2. Major muscle exercise<br>3. Sun/Moon Salutations<br>4. Advanced Asanas<br>5. Hatha Yoga<br>6. Power Yoga<br>7. Vinyasa<br>8. Tratak<br>9. Bandha<br>10. Mudras <br>11. Deep Breathing<br>12. Yog Nidra<br>13. Meditation<br>14. Shata Karma<br>15. Shanti Path'
                },
                {
                    id: 2,
                    image: '/static/assets/pranayam.webp',
                    title: 'Pranayam',
                    onlinePrice: 230,
                    offlinePrice: 200,
                    description: '1. Anulom-Vilom<br>2. Surya Bhedi<br>3. Chandra Bhedi<br>4. Bhastrika<br>5. Bhramari<br>6. Ujjayi<br>7. Kapal Bhati'
                },
                {
                    id: 3,
                    image: '/static/assets/kidsyoga.webp',
                    title: 'Kids Yoga',
                    onlinePrice: 100,
                    offlinePrice: 80,
                    description: 'Yoga practice appropriate for kids'
                },
                {
                    id: 4,
                    image: '/static/assets/medicalyoga.webp',
                    title: 'Medical Yoga',
                    onlinePrice: 230,
                    offlinePrice: 200,
                    description: 'Yoga practice appropriate for people with medical issues'
                },
                {
                    id: 5,
                    image: '/static/assets/poweryoga.webp',
                    title: 'Yog Therapy',
                    onlinePrice: 230,
                    offlinePrice: 200,
                    description: 'For people looking for a therapeutic experience in their Yoga practice'
                },
                {
                    id: 6,
                    image: '/static/assets/weightlossyoga.webp',
                    title: 'Weight Loss Yoga',
                    onlinePrice: 230,
                    offlinePrice: 200,
                    description: 'Yoga practice suitable for weight loss'
                },
                {
                    id: 7,
                    image: '/static/assets/aerialyoga.webp',
                    title: 'Aerial Yoga',
                    onlinePrice: 230,
                    offlinePrice: 200,
                    description: 'Yoga practice using silk fabric in a hanging fashion,<br>useful for increasing core stability'
                },
                {
                    id: 8,
                    image: '/static/assets/pregnancyyoga.webp',
                    title: 'Prenatal Yoga',
                    onlinePrice: 230,
                    offlinePrice: 200,
                    description: 'Yoga appropriate for the soon to be mothers'
                }
            ];

            const categories = [...new Set(product.map((item) => item))];
            let cart = [];
            let selectedCourseNames = [];
            let isOnlineMode = false; // Default to offline mode

            const pricingData = {
                "general-yoga": {
                    "regular": {
                        "monthly": 2500,
                        "quarterly": 6000,
                        "half-yearly": 10000,
                        "yearly": 17000
                    },
                    "alternate": {
                        "monthly": 1500,
                        "quarterly": 4000,
                        "half-yearly": 7500,
                        "yearly": 11500
                    }
                },
                "advanced-yoga": {
                    "regular": {
                        "monthly": 3500,
                        "quarterly": 9000,
                        "half-yearly": 15000,
                        "yearly": 21000
                    },
                    "alternate": {
                        "monthly": 2500,
                        "quarterly": 6000,
                        "half-yearly": 10000,
                        "yearly": 15000
                    }
                }
            };

            // Render products
            document.getElementById('root').innerHTML = categories.map((item, index) => {
                const price = isOnlineMode ? item.onlinePrice : item.offlinePrice;
                return (
                    `<div class='box' id='product-${index}' data-type='${item.dataType || ''}'>
                        <div class='img-box'>
                            <img class='images' src=${item.image} alt=${item.title}>
                        </div>
                        <div class='description-box' id='description-${index}'></div>
                        <div class='bottom'>
                            <p>${item.title}</p>
                            <h2 id='price-${index}'>Rs ${price}.00</h2>
                            <button onclick='addtocart(${index})'>Add to cart</button>
                        </div>
                    </div>`
                );
            }).join('');

            // Update prices based on mode (online/offline) and payment options
            function updatePrices() {
                const paymentManner = document.getElementById('payment-manner').value;
                const classFrequency = document.getElementById('class-frequency').value;

                document.querySelectorAll('.box').forEach((product, index) => {
                    const productType = product.getAttribute('data-type');
                    const priceElement = product.querySelector('h2');

                    if (productType && pricingData[productType] && pricingData[productType][classFrequency]) {
                        // Dynamic pricing for General Yoga and Advanced Yoga
                        const price = pricingData[productType][classFrequency][paymentManner];
                        priceElement.textContent = `Rs ${price}.00`;
                    } else {
                        // Default pricing for other courses
                        const price = isOnlineMode ? categories[index].onlinePrice : categories[index].offlinePrice;
                        priceElement.textContent = `Rs ${price}.00`;
                    }
                });
            }

            // Toggle between online and offline modes
            document.getElementById('mode-toggle').addEventListener('change', function() {
                isOnlineMode = this.checked;
                document.getElementById('mode-status').textContent = isOnlineMode ? 'Online' : 'Offline';
                updatePrices();
            });

            // Add to cart function
            function addtocart(index) {
                const product = categories[index];
                const paymentManner = document.getElementById('payment-manner').value;
                const classFrequency = document.getElementById('class-frequency').value;

                if ((product.dataType === 'general-yoga' || product.dataType === 'advanced-yoga') && (!paymentManner || !classFrequency)) {
                    alert("Please select Payment Manner and Class Frequency before adding to cart.");
                    return;
                }

                const price = product.dataType && pricingData[product.dataType] && pricingData[product.dataType][classFrequency] ?
                    pricingData[product.dataType][classFrequency][paymentManner] :
                    (isOnlineMode ? product.onlinePrice : product.offlinePrice);

                let existingItem = cart.find(item => item.id === product.id);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({
                        ...product,
                        quantity: 1,
                        paymentManner,
                        classFrequency,
                        price
                    });
                }
                displaycart();
            }

            // Display cart function
            function displaycart() {
                let total = 0;
                document.getElementById("count").innerHTML = cart.length;
                if (cart.length == 0) {
                    document.getElementById('cartItem').innerHTML = "Your cart is empty";
                    document.getElementById("total").innerHTML = "Rs 0.00";
                } else {
                    document.getElementById("cartItem").innerHTML = cart.map((item) => {
                        total += item.price * item.quantity;
                        document.getElementById("total").innerHTML = `Rs ${total}.00`;
                        return (
                            `<div class='cart-item'>
                                <div class='row-img'>
                                    <img class='rowimg' src=${item.image}>
                                </div>
                                <p style='font-size:12px;'>${item.title} ${item.paymentManner ? `(${item.paymentManner}, ${item.classFrequency})` : ''} x${item.quantity}</p>
                                <h2 style='font-size: 15px;'>Rs ${item.price * item.quantity}.00</h2>
                                <button class='qty-btn' onclick='updateQuantity(${item.id}, 1)'>+</button>
                                <button class='qty-btn' onclick='updateQuantity(${item.id}, -1)'>−</button>
                                <i class='fa-solid fa-trash' onclick='delElement(${item.id})'></i>
                            </div>`
                        );
                    }).join('');
                }
            }

            // Initialize default prices
            window.onload = function () {
                document.getElementById('payment-manner').value = 'monthly';
                document.getElementById('class-frequency').value = 'regular';
                updatePrices();
            };
        </script>
    </body>
</html>

-->